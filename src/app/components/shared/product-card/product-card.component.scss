.card {
  display: block;
  border-radius: 12px;
  overflow: hidden;
  background: var(--surface);
  color: inherit;
  text-decoration: none;
  border: 1px solid var(--border);
  transition: transform .2s ease, box-shadow .2s ease, opacity .35s ease;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}
@media (prefers-reduced-motion: no-preference) {
  .card { opacity: 0; transform: translateY(8px); }
  .card.in-view { opacity: 1; transform: none; }
}
.image-wrap { position: relative; width: 100%; aspect-ratio: 1/1; background: var(--surface); display: block; overflow: hidden; }
.image-wrap .badge { position: absolute; left: 8px; top: 8px; background: var(--accent-color); color: var(--brand-900); font-weight: 800; font-size: 11px; letter-spacing: .2px; padding: 4px 8px; border-radius: 999px; box-shadow: 0 6px 16px rgba(0,0,0,.18); opacity: .98; border: 1px solid rgba(0,0,0,.05); }
/* Base and overlay layers */
.image-wrap .layer { position: absolute; inset: 0; width: 100%; height: 100%; display: block; }
.image-wrap .layer img { width: 100%; height: 100%; object-fit: contain; background: #fff; display: block; transition: opacity .35s ease; opacity: 0; will-change: opacity; }
.image-wrap .layer .base { opacity: 0; }
.image-wrap .base img.base.loaded { opacity: 1; }
.image-wrap .overlay { object-fit: contain; background: #fff; opacity: 0; transition: opacity .3s ease; }
.image-wrap .overlay.show { opacity: 1; }
  /* Avoid cropping on supplier images; skip aggressive hover zoom */
  /* .card:hover .image-wrap img { transform: scale(1.02); } */
.quick { position: absolute; right: 8px; bottom: 8px; background: var(--accent-color); border: 0; color: var(--brand-900); font-weight: 700; padding: 8px 10px; border-radius: 999px; opacity: 0; transform: translateY(6px); transition: all .2s ease; }
.card:hover .quick { opacity: 1; transform: translateY(0); }
.info { padding: 12px; }
.name { font-weight: 600; margin-bottom: 4px; }
.price { color: var(--accent-color); font-weight: 600; }
.meta { color: var(--text-600); font-size: 12px; }
.stars { letter-spacing: 1px; background: linear-gradient(90deg, #ffb300, #ffc533); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.cta { margin-top: 10px; width: 100%; background: var(--brand-color); color: #fff; border: 0; border-radius: 8px; padding: 10px 12px; font-weight: 700; cursor: pointer; }
.cta:hover { filter: brightness(1.02); }
.toast { position: absolute; right: 10px; bottom: 10px; background: rgba(43,27,14,.95); color: #fff; padding: 6px 10px; border-radius: 999px; font-size: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.2); }

/* Quick View */
.qv-sheet { padding: 12px; display: grid; grid-template-rows: auto 1fr auto; max-height: 85vh; width: 100%; box-sizing: border-box; overscroll-behavior: contain; }
@supports (height: 100dvh) {
  .qv-sheet { max-height: calc(100dvh - 16px); }
}
.qv-head { display: flex; align-items: center; justify-content: space-between; padding: 4px 2px 10px; border-bottom: 1px solid var(--border); }
.qv-head .title { font-weight: 800; font-size: 16px; line-height: 1.2; }
.qv-head .close { appearance: none; background: transparent; border: 0; font-size: 22px; cursor: pointer; line-height: 1; }
.qv-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; overflow: auto; padding: 10px 2px; }
.qv-image img { width: 100%; height: auto; border-radius: 12px; background: var(--surface-soft); }
.qv-image { position: relative; }
.qv-image .nav { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(0,0,0,.15); color: #fff; border: 0; width: 36px; height: 36px; border-radius: 999px; font-size: 22px; cursor: pointer; }
.qv-image .nav.prev { left: 6px; }
.qv-image .nav.next { right: 6px; }
.qv-image .dots { position: absolute; left: 0; right: 0; bottom: 8px; display: flex; gap: 6px; justify-content: center; }
.qv-image .dots button { width: 6px; height: 6px; border-radius: 999px; border: 0; background: rgba(255,255,255,.5); }
.qv-image .dots .active { background: #fff; box-shadow: 0 0 0 2px rgba(0,0,0,.12); }
.qv-info .price { color: var(--accent-color); font-weight: 800; margin-bottom: 6px; }
.qv-info .meta { color: var(--text-600); }
.qv-actions { display: flex; gap: 10px; padding-top: 10px; border-top: 1px solid var(--border); }
.qv-actions .btn.primary { flex: 1; }
@media (max-width: 800px) { .qv-grid { grid-template-columns: 1fr; } }

@media (max-width: 700px) {
  .qv-grid { padding-bottom: 6px; overflow: auto; -webkit-overflow-scrolling: touch; }
  .qv-actions { position: sticky; bottom: 0; background: var(--surface); padding: 10px 2px max(10px, env(safe-area-inset-bottom)); border-top: 1px solid var(--border); }
  .qv-sheet { max-height: none; height: calc(100dvh - 16px); border-top-left-radius: 16px; border-top-right-radius: 16px; }
}

/* Qty control inside QV footer */
.qv-actions .qty { display:inline-flex; align-items:center; gap:6px; border:1px solid var(--border); border-radius:999px; padding:2px 6px; }
.qv-actions .qty .q { width:28px; height:28px; border:0; background: var(--brand-100); border-radius:999px; cursor:pointer; font-weight:800; }
.qv-actions .qty input { width:28px; text-align:center; border:0; background:transparent; font-weight:700; }

/* Mobile dense layout tweaks */
@media (max-width: 700px) {
  .name { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; min-height: 2.6em; }
  .meta { display: none; }
  .cta { padding: 8px 10px; border-radius: 6px; font-weight: 700; }
  /* Show Quick button always to mimic fastâ€‘add behaviour */
  .quick { opacity: 1; transform: none; }
}
